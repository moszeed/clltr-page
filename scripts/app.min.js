!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){!function(){"use strict";var $=require("jquery");$.ajaxPrefilter(function(options){options.async=!0});var Backbone=require("drbx-js-backbone");Backbone.View=require("backbone-template");var User=require("./scripts/modules/user.module.js"),Router=require("./scripts/modules/router.module.js")();Router.httpsCheck();var App=module.exports;App.Main=Backbone.View.extend({el:"body #main",initialize:function(){this.listenTo(Router,"changePage",this.render),this.render()},render:function(page){if(page=page||Router.getCurrentPage()||null,null===page)throw new Error("no page given");this.template({path:"./templates/pages/"+page+".html"})}}),App.View=Backbone.View.extend({el:"body",events:{"click #impressum":function(){Router.changePage("libary")},"click #impressumLink":function(){Router.changePage("impressum")},"click button.login":function(){User.login().then(function(){Router.changePage("libary")})},"click #logout":function(){User.logout(),Router.changePage("whatis")}},initialize:function(){this.vMain=new App.Main}}),App.current=new App.View}()},{"./scripts/modules/router.module.js":2,"./scripts/modules/user.module.js":3,"backbone-template":"backbone-template","drbx-js-backbone":"drbx-js-backbone",jquery:"jquery"}],2:[function(require,module){!function(){"use strict";var Backbone=require("drbx-js-backbone"),User=require("./user.module.js"),Router=Backbone.Router.extend({routes:{"*path":"default"},initialize:function(opts){opts=opts||{};var that=this;that.on("route:default",function(urlParams){return null!==urlParams&&-1!==urlParams.indexOf("access_token")?void Backbone.DrbxJs.Dropbox.AuthDriver.Popup.oauthReceiver():void that.changePage(urlParams)})},httpsCheck:function(){var parser=document.createElement("a");if(parser.href=document.URL,"localhost"!==parser.hostname){var port=parser.port;""!==port&&(port=":"+port);var host=parser.hostname+port;host==window.location.host&&"https:"!=window.location.protocol&&(window.location.protocol="https")}},changePage:function(page){page=page||"libary",User.isLoggedIn()||(page="whatis"),this.navigate(page),this.trigger("changePage")},getCurrentPage:function(){return Backbone.history.fragment}});module.exports=function(){var currentRouter=new Router;return Backbone.history.start(),currentRouter}}()},{"./user.module.js":3,"drbx-js-backbone":"drbx-js-backbone"}],3:[function(require,module){!function(){"use strict";var Helper=require("helper"),Backbone=require("drbx-js-backbone");Backbone.init({client:{key:"38sn4xw32xtxi32"},auth:new Backbone.DrbxJs.Dropbox.AuthDriver.Popup({receiverUrl:Helper.getCurrentUrl(),rememberUser:!0})});var User={};User.Model=Backbone.Model.extend({login:function(params){return params=params||{},params.token?Backbone.init({client:{token:params.token}}):Backbone.login().then(function(){localStorage.setItem("alreadyAuthenticated","true")})},logout:function(){localStorage.clear()},isLoggedIn:function(){var isAuthenticated=Backbone.DrbxJs.Client.isAuthenticated();return isAuthenticated||localStorage.getItem("alreadyAuthenticated")&&(this.login(),isAuthenticated=!0),isAuthenticated}}),module.exports=new User.Model}()},{"drbx-js-backbone":"drbx-js-backbone",helper:"helper"}]},{},[1]);